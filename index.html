<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>å¤œç©ºAI Â· å¿ƒçµæ²»æ„ˆ</title>
<style>
  body {
    margin: 0;
    background: radial-gradient(circle at 20% 20%, #0d1b2a, #1b263b, #415a77);
    font-family: "Microsoft YaHei", sans-serif;
    color: white;
  }
  .chat-container {
    width: 90%;
    max-width: 600px;
    margin: 100px auto 0;
    background: rgba(255,255,255,0.08);
    border-radius: 15px;
    padding: 20px;
    height: 60vh;
    overflow-y: auto;
  }
  .message { padding: 10px 15px; margin: 10px 0; border-radius: 10px; max-width: 75%; line-height: 1.5; }
  .user { background: rgba(255,255,255,0.25); margin-left: auto; text-align: right; }
  .ai { background: rgba(0,0,0,0.3); margin-right: auto; }
  .input-area { width: 90%; max-width: 600px; margin: 20px auto; display: flex; }
  input { flex: 1; padding: 10px; border: none; border-radius: 8px; font-size: 16px; outline: none; }
  button { margin-left: 10px; padding: 10px 18px; border: none; border-radius: 8px; background: #5a7de0; color: white; cursor: pointer; }
  button:hover { background: #4a68c2; }
</style>
</head>
<body>

<div class="chat-container" id="chatBox">
  <div class="message ai">ğŸŒ™ ä½ å¥½ï¼Œæˆ‘æ˜¯å¤œç©ºAIï¼Œæ„¿åšä½ å®‰é™çš„å€¾å¬è€…ã€‚</div>
</div>

<div class="input-area">
  <input type="text" id="userInput" placeholder="å†™ä¸‹ä½ çš„å¿ƒæƒ…..." />
  <button onclick="sendMessage()">å‘é€</button>
</div>

<script>
async function sendMessage() {
  const input = document.getElementById("userInput");
  const chatBox = document.getElementById("chatBox");
  const text = input.value.trim();
  if (!text) return;

  const userMsg = document.createElement("div");
  userMsg.classList.add("message", "user");
  userMsg.textContent = text;
  chatBox.appendChild(userMsg);
  chatBox.scrollTop = chatBox.scrollHeight;
  input.value = "";

  const aiMsg = document.createElement("div");
  aiMsg.classList.add("message", "ai");
  aiMsg.textContent = "ğŸ’­ å¤œç©ºAIæ­£åœ¨å€¾å¬...";
  chatBox.appendChild(aiMsg);
  chatBox.scrollTop = chatBox.scrollHeight;

  try {
    const response = await fetch("/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: text })
    });
    const data = await response.json();
    aiMsg.textContent = data.reply || "âœ¨ æˆ‘å¬æ‡‚äº†ï¼Œä¹Ÿè®¸ä½ éœ€è¦ä¸€ç‚¹æ—¶é—´æ”¾æ¾ã€‚";
  } catch (e) {
    aiMsg.textContent = "ğŸŒ™ å¤œç©ºæœ‰ç‚¹å¿™ï¼Œç¨åå†å’Œæˆ‘è¯´è¯´å¥½å—ï¼Ÿ";
  }

  chatBox.scrollTop = chatBox.scrollHeight;
}
</script>

</body>
</html>
